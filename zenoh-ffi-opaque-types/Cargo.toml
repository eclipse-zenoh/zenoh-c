#
# Copyright (c) 2025 ZettaScale Technology
#
# This program and the accompanying materials are made available under the
# terms of the Eclipse Public License 2.0 which is available at
# http://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0
# which is available at https://www.apache.org/licenses/LICENSE-2.0.
#
# SPDX-License-Identifier: EPL-2.0 OR Apache-2.0
#
# Contributors:
#   ZettaScale Zenoh Team, <zenoh@zettascale.tech>
#
[package]
name = "zenoh-ffi-opaque-types"
version = { workspace = true }
repository = { workspace = true}
homepage = { workspace = true }
authors = { workspace = true }
edition = { workspace = true }
license = { workspace = true }
categories = { workspace = true }
description = "This crate generates opaque repr-C compatible wrappers for Rust structures for zenoh-ffi"
build = "build.rs"

[features]
shared-memory = ["zenoh/shared-memory", "zenoh-protocol/shared-memory"]
unstable = ["zenoh/unstable", "zenoh-ext/unstable"]
auth_pubkey = ["zenoh/auth_pubkey"]
auth_usrpwd = ["zenoh/auth_usrpwd"]
transport_multilink = ["zenoh/transport_multilink"]
transport_compression = ["zenoh/transport_compression"]
transport_quic = ["zenoh/transport_quic"]
transport_serial = ["zenoh/transport_serial"]
transport_unixpipe = ["zenoh/transport_unixpipe"]
transport_tcp = ["zenoh/transport_tcp"]
transport_tls = ["zenoh/transport_tls"]
transport_udp = ["zenoh/transport_udp"]
transport_unixsock-stream = ["zenoh/transport_unixsock-stream"]
transport_ws = ["zenoh/transport_ws"]
transport_vsock = ["zenoh/transport_vsock"]

panic = [
] # The whole purpose of this project is to generate set of compilation panic messages with calculated structure sizes. To do it the "panic" feature should be set. By default we just want to check if build is successful.
default = ["zenoh/default"]

[dependencies]
zenoh = { version = "1.5.0", git = "https://github.com/eclipse-zenoh/zenoh.git", branch = "main", default-features = false, features = [
    "internal",
] }
zenoh-ext = { version = "1.5.0", git = "https://github.com/eclipse-zenoh/zenoh.git", branch = "main", default-features = false, features = [
    "internal",
] }
zenoh-protocol = { version = "1.5.0", git = "https://github.com/eclipse-zenoh/zenoh.git", branch = "main" }
const_format = "0.2.32"
flume = "*"
tokio = "*"
prebindgen-proc-macro = { version = "0.4.0", git = "https://github.com/milyin/prebindgen.git", branch = "main" }

[build-dependencies]
regex = "1.11.1"
quote = "1"
proc-macro2 = "1"
syn = { version = "2", features = ["full"] }
prettyplease = "0.2"
prebindgen = { version = "0.4.0", git = "https://github.com/milyin/prebindgen.git", branch = "main" }
prebindgen-project-root = { version = "0.4.0", git = "https://github.com/milyin/prebindgen.git", branch = "main" }
target-lexicon = "0.13"